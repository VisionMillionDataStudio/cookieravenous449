# ç½‘ç«™æŒ‰é’®æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunshansj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://gitee.com/qunmasj/projects)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€äº’è”ç½‘çš„å¿«é€Ÿå‘å±•ï¼Œç½‘ç«™çš„ç”¨æˆ·ä½“éªŒæ—¥ç›Šæˆä¸ºå½±å“ç”¨æˆ·ç•™å­˜å’Œè½¬åŒ–ç‡çš„é‡è¦å› ç´ ã€‚åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹ï¼Œç½‘ç«™ç•Œé¢è®¾è®¡ä¸­çš„æŒ‰é’®å…ƒç´ ï¼Œä½œä¸ºç”¨æˆ·ä¸ç½‘ç«™äº¤äº’çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œå…¶è¯†åˆ«ä¸ä¼˜åŒ–æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚ä¼ ç»Ÿçš„æŒ‰é’®æ£€æµ‹æ–¹æ³•å¾€å¾€ä¾èµ–äºäººå·¥æ ‡æ³¨å’Œè§„åˆ™å®šä¹‰ï¼Œæ•ˆç‡ä½ä¸‹ä¸”éš¾ä»¥é€‚åº”å¤šæ ·åŒ–çš„è®¾è®¡é£æ ¼ã€‚è¿‘å¹´æ¥ï¼Œæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„è¿…çŒ›å‘å±•ä¸ºè¿™ä¸€é—®é¢˜æä¾›äº†æ–°çš„è§£å†³æ–¹æ¡ˆã€‚å°¤å…¶æ˜¯YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹ï¼Œä»¥å…¶é«˜æ•ˆçš„å®æ—¶ç›®æ ‡æ£€æµ‹èƒ½åŠ›ï¼Œæˆä¸ºäº†è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„é‡è¦å·¥å…·ã€‚

æœ¬ç ”ç©¶æ—¨åœ¨åŸºäºæ”¹è¿›çš„YOLOv8æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªé«˜æ•ˆçš„ç½‘ç«™æŒ‰é’®æ£€æµ‹ç³»ç»Ÿã€‚é€šè¿‡å¯¹ç°æœ‰YOLOv8æ¨¡å‹çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæé«˜æŒ‰é’®æ£€æµ‹çš„å‡†ç¡®æ€§å’Œé€Ÿåº¦ï¼Œä»è€Œä¸ºç½‘ç«™è®¾è®¡å¸ˆå’Œå¼€å‘è€…æä¾›æ›´ä¸ºä¾¿æ·çš„å·¥å…·ï¼Œå¸®åŠ©ä»–ä»¬åœ¨è®¾è®¡è¿‡ç¨‹ä¸­å¿«é€Ÿè¯†åˆ«å’Œä¼˜åŒ–æŒ‰é’®å…ƒç´ ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªåŒ…å«2200å¼ å›¾åƒçš„æ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†ç”±ä¸¤ç±»å¯¹è±¡ç»„æˆï¼šæŒ‰é’®å’Œé¥¼å¹²ï¼ˆcookieï¼‰ã€‚å°½ç®¡é¥¼å¹²å¹¶éç›´æ¥ä¸æŒ‰é’®ç›¸å…³çš„å…ƒç´ ï¼Œä½†å…¶å­˜åœ¨ä¸ºæ¨¡å‹çš„è®­ç»ƒæä¾›äº†å¤šæ ·æ€§ï¼Œæœ‰åŠ©äºæå‡æ¨¡å‹åœ¨å¤æ‚åœºæ™¯ä¸‹çš„é²æ£’æ€§ã€‚

æŒ‰é’®ä½œä¸ºç”¨æˆ·ç•Œé¢çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå…¶è®¾è®¡ä¸å¸ƒå±€ç›´æ¥å½±å“ç”¨æˆ·çš„æ“ä½œæ•ˆç‡å’Œæ»¡æ„åº¦ã€‚å› æ­¤ï¼Œå‡†ç¡®æ£€æµ‹å’Œåˆ†ææŒ‰é’®çš„åˆ†å¸ƒã€æ ·å¼å’ŒåŠŸèƒ½ï¼Œå¯¹äºæå‡ç½‘ç«™çš„å¯ç”¨æ€§å…·æœ‰é‡è¦æ„ä¹‰ã€‚é€šè¿‡è‡ªåŠ¨åŒ–çš„æŒ‰é’®æ£€æµ‹ç³»ç»Ÿï¼Œè®¾è®¡å¸ˆå¯ä»¥å¿«é€Ÿè·å–ç½‘ç«™ä¸­æŒ‰é’®çš„ç›¸å…³ä¿¡æ¯ï¼Œè¿›è€Œè¿›è¡Œé’ˆå¯¹æ€§çš„ä¼˜åŒ–ã€‚æ­¤å¤–ï¼Œæ”¹è¿›YOLOv8æ¨¡å‹çš„åº”ç”¨ï¼Œä¸ä»…å¯ä»¥æå‡æ£€æµ‹ç²¾åº¦ï¼Œè¿˜èƒ½å®ç°å®æ—¶åé¦ˆï¼Œä¸ºç”¨æˆ·æä¾›æ›´ä¸ºæµç•…çš„äº¤äº’ä½“éªŒã€‚

åœ¨æŠ€æœ¯å±‚é¢ï¼ŒYOLOv8æ¨¡å‹ç›¸è¾ƒäºå…¶å‰èº«åœ¨é€Ÿåº¦å’Œç²¾åº¦ä¸Šéƒ½æœ‰æ˜¾è‘—æå‡ï¼Œå°¤å…¶åœ¨å°ç›®æ ‡æ£€æµ‹æ–¹é¢è¡¨ç°ä¼˜å¼‚ã€‚é€šè¿‡å¯¹æ¨¡å‹çš„æ”¹è¿›ï¼Œæˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°é€‚åº”ä¸åŒåˆ†è¾¨ç‡å’Œè®¾è®¡é£æ ¼çš„ç½‘ç«™ç•Œé¢ï¼Œæé«˜æ£€æµ‹çš„å‡†ç¡®æ€§ã€‚åŒæ—¶ï¼Œåˆ©ç”¨æ•°æ®å¢å¼ºå’Œè¿ç§»å­¦ä¹ ç­‰æŠ€æœ¯ï¼Œå¯ä»¥è¿›ä¸€æ­¥æå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼Œä½¿å…¶åœ¨ä¸åŒç½‘ç«™åœºæ™¯ä¸‹å‡èƒ½ä¿æŒè‰¯å¥½çš„æ€§èƒ½ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬ç ”ç©¶ä¸ä»…å…·æœ‰é‡è¦çš„ç†è®ºæ„ä¹‰ï¼Œä¹Ÿå…·å¤‡å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚é€šè¿‡æ„å»ºåŸºäºæ”¹è¿›YOLOv8çš„ç½‘ç«™æŒ‰é’®æ£€æµ‹ç³»ç»Ÿï¼Œæˆ‘ä»¬æœŸæœ›èƒ½å¤Ÿæ¨åŠ¨ç½‘ç«™è®¾è®¡é¢†åŸŸçš„è‡ªåŠ¨åŒ–è¿›ç¨‹ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œå¹¶ä¸ºåç»­ç›¸å…³ç ”ç©¶æä¾›æœ‰ä»·å€¼çš„å‚è€ƒå’Œå€Ÿé‰´ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œæœªæ¥çš„æŒ‰é’®æ£€æµ‹ç³»ç»Ÿå°†ä¸ä»…é™äºé™æ€å›¾åƒåˆ†æï¼Œè¿˜å¯ä»¥æ‰©å±•åˆ°åŠ¨æ€äº¤äº’åœºæ™¯ä¸­ï¼Œä¸ºç”¨æˆ·æä¾›æ›´ä¸ºæ™ºèƒ½åŒ–çš„æœåŠ¡ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV19n4femEND/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 2
names: ['button', 'cookie']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åä¸ºâ€œcookieravenousâ€çš„æ•°æ®é›†ï¼Œä»¥æ”¯æŒæ”¹è¿›YOLOv8çš„ç½‘ç«™æŒ‰é’®æ£€æµ‹ç³»ç»Ÿçš„è®­ç»ƒä¸æµ‹è¯•ã€‚è¯¥æ•°æ®é›†ä¸“æ³¨äºä¸¤ä¸ªä¸»è¦ç±»åˆ«ï¼Œåˆ†åˆ«æ˜¯â€œbuttonâ€ï¼ˆæŒ‰é’®ï¼‰å’Œâ€œcookieâ€ï¼ˆé¥¼å¹²ï¼‰ï¼Œä¸ºæˆ‘ä»¬çš„æ¨¡å‹æä¾›äº†ä¸°å¯Œçš„æ ·æœ¬å’Œå¤šæ ·åŒ–çš„åœºæ™¯ã€‚è¿™ç§åˆ†ç±»çš„é€‰æ‹©ä¸ä»…ä½“ç°äº†æˆ‘ä»¬å¯¹ç½‘ç«™ç”¨æˆ·äº¤äº’å…ƒç´ çš„å…³æ³¨ï¼Œä¹Ÿä¸ºæˆ‘ä»¬åœ¨è§†è§‰è¯†åˆ«é¢†åŸŸçš„ç ”ç©¶æä¾›äº†ç‹¬ç‰¹çš„è§†è§’ã€‚

â€œcookieravenousâ€æ•°æ®é›†åŒ…å«äº†å¤§é‡ä¸æŒ‰é’®å’Œé¥¼å¹²ç›¸å…³çš„å›¾åƒï¼Œæ—¨åœ¨æ¨¡æ‹ŸçœŸå®ç½‘ç«™ç¯å¢ƒä¸­çš„å„ç§æƒ…å†µã€‚æ•°æ®é›†ä¸­çš„â€œbuttonâ€ç±»åˆ«æ¶µç›–äº†ä¸åŒæ ·å¼ã€é¢œè‰²å’Œå½¢çŠ¶çš„æŒ‰é’®ï¼Œè¿™äº›æŒ‰é’®å¯èƒ½å‡ºç°åœ¨å„ç§ç½‘é¡µè®¾è®¡ä¸­ï¼Œå¦‚ç”µå­å•†åŠ¡ç½‘ç«™ã€ç¤¾äº¤åª’ä½“å¹³å°å’Œä¿¡æ¯é—¨æˆ·ç­‰ã€‚é€šè¿‡å¯¹è¿™äº›æŒ‰é’®çš„æ£€æµ‹ï¼Œç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·ç•Œé¢ä¸­çš„äº¤äº’å…ƒç´ ï¼Œä»è€Œæé«˜ç”¨æˆ·ä½“éªŒå’Œæ“ä½œæ•ˆç‡ã€‚

å¦ä¸€æ–¹é¢ï¼Œâ€œcookieâ€ç±»åˆ«åˆ™åŒ…å«äº†å¤šç§ç±»å‹çš„é¥¼å¹²å›¾åƒï¼Œè¿™äº›é¥¼å¹²ä¸ä»…åœ¨å¤–è§‚ä¸Šå„å…·ç‰¹è‰²ï¼Œè€Œä¸”åœ¨èƒŒæ™¯å’Œå…‰ç…§æ¡ä»¶ä¸Šä¹Ÿå­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚è¿™ç§å¤šæ ·æ€§ä½¿å¾—æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­èƒ½å¤Ÿå­¦ä¹ åˆ°æ›´ä¸ºå¤æ‚çš„ç‰¹å¾ï¼Œä»è€Œåœ¨å®é™…åº”ç”¨ä¸­å…·å¤‡æ›´å¼ºçš„æ³›åŒ–èƒ½åŠ›ã€‚é¥¼å¹²çš„å¼•å…¥ä¸ä»…å¢åŠ äº†æ•°æ®é›†çš„è¶£å‘³æ€§ï¼Œä¹Ÿä¸ºæ¨¡å‹æä¾›äº†æ›´å¤šçš„æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤æ‚èƒŒæ™¯å’Œä¸åŒæ‹æ‘„è§’åº¦æ—¶ã€‚

æ•°æ®é›†çš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå›¾åƒçš„æ ‡æ³¨å’Œåˆ†ç±»æ˜¯è‡³å…³é‡è¦çš„ã€‚æ¯ä¸€å¼ å›¾åƒéƒ½ç»è¿‡ç²¾ç¡®çš„æ ‡æ³¨ï¼Œä»¥ç¡®ä¿æ¨¡å‹åœ¨è®­ç»ƒæ—¶èƒ½å¤Ÿå‡†ç¡®è¯†åˆ«å’ŒåŒºåˆ†è¿™ä¸¤ä¸ªç±»åˆ«ã€‚é€šè¿‡é«˜è´¨é‡çš„æ ‡æ³¨ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæœ‰æ•ˆåœ°æé«˜æ¨¡å‹çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚æ­¤å¤–ï¼Œæ•°æ®é›†è¿˜åŒ…å«äº†å¤šç§åœºæ™¯å’Œç¯å¢ƒè®¾ç½®ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿåœ¨ä¸åŒçš„å®é™…åº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ã€‚

åœ¨ä½¿ç”¨â€œcookieravenousâ€æ•°æ®é›†è¿›è¡ŒYOLOv8æ¨¡å‹çš„è®­ç»ƒæ—¶ï¼Œæˆ‘ä»¬ç‰¹åˆ«å…³æ³¨äº†æ¨¡å‹çš„ç²¾åº¦å’Œå¬å›ç‡ã€‚é€šè¿‡ä¸æ–­ä¼˜åŒ–æ¨¡å‹å‚æ•°å’Œè°ƒæ•´è®­ç»ƒç­–ç•¥ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå®ç°æ›´é«˜çš„æ£€æµ‹å‡†ç¡®ç‡ï¼Œä»¥æ»¡è¶³å®é™…åº”ç”¨çš„éœ€æ±‚ã€‚éšç€è®­ç»ƒçš„æ·±å…¥ï¼Œæ¨¡å‹å°†é€æ¸æŒæ¡æŒ‰é’®å’Œé¥¼å¹²çš„ç‰¹å¾ï¼Œä»è€Œåœ¨å®æ—¶æ£€æµ‹ä¸­è¡¨ç°å‡ºè‰²ã€‚

æ€»ä¹‹ï¼Œâ€œcookieravenousâ€æ•°æ®é›†ä¸ºæˆ‘ä»¬æ”¹è¿›YOLOv8çš„ç½‘ç«™æŒ‰é’®æ£€æµ‹ç³»ç»Ÿæä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡å¯¹æŒ‰é’®å’Œé¥¼å¹²è¿™ä¸¤ä¸ªç±»åˆ«çš„æ·±å…¥ç ”ç©¶ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿæå‡æ¨¡å‹çš„æ€§èƒ½ï¼Œè¿˜èƒ½ä¸ºæœªæ¥çš„ç ”ç©¶å’Œåº”ç”¨å¥ å®šåŸºç¡€ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­è¿›æ­¥ï¼Œæˆ‘ä»¬æœŸå¾…è¿™ä¸€æ•°æ®é›†èƒ½å¤Ÿä¸ºæ›´å¤šçš„è§†è§‰è¯†åˆ«ä»»åŠ¡æä¾›æ”¯æŒï¼Œæ¨åŠ¨ç›¸å…³é¢†åŸŸçš„å‘å±•ã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ï¼ˆYou Only Look Once version 8ï¼‰æ˜¯ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„ä¸€é¡¹é‡è¦è¿›å±•ï¼Œç”±Ultralyticså›¢é˜Ÿåœ¨YOLOv5çš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ï¼Œç»“åˆäº†è¿‘ä¸¤å¹´å†…å¤šé¡¹ç»è¿‡å®é™…éªŒè¯çš„æŠ€æœ¯åˆ›æ–°ã€‚è¯¥æ¨¡å‹åœ¨2023å¹´1æœˆæ­£å¼æå‡ºï¼Œæ—¨åœ¨æå‡ç›®æ ‡æ£€æµ‹çš„ç²¾åº¦å’Œé€Ÿåº¦ï¼Œé€‚åº”æ›´ä¸ºå¤æ‚çš„åº”ç”¨åœºæ™¯ã€‚YOLOv8çš„è®¾è®¡ç†å¿µå»¶ç»­äº†YOLOç³»åˆ—æ¨¡å‹çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œå³åœ¨ä¿è¯å®æ—¶æ€§çš„åŒæ—¶ï¼Œæå‡æ£€æµ‹çš„å‡†ç¡®æ€§å’Œé²æ£’æ€§ã€‚

YOLOv8çš„ç½‘ç»œç»“æ„ç”±å¤šä¸ªæ ¸å¿ƒç»„ä»¶æ„æˆï¼ŒåŒ…æ‹¬è¾“å…¥å±‚ã€ä¸»å¹²ç½‘ç»œã€é¢ˆéƒ¨ç½‘ç»œå’Œå¤´éƒ¨ç½‘ç»œã€‚è¾“å…¥å±‚è´Ÿè´£å¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼Œå°†å…¶ç¼©æ”¾è‡³æŒ‡å®šçš„è¾“å…¥å°ºå¯¸ï¼Œä»¥æ»¡è¶³åç»­ç½‘ç»œå¤„ç†çš„éœ€æ±‚ã€‚ä¸»å¹²ç½‘ç»œæ˜¯YOLOv8çš„ç‰¹å¾æå–æ ¸å¿ƒï¼Œé‡‡ç”¨å·ç§¯æ“ä½œå¯¹è¾“å…¥å›¾åƒè¿›è¡Œä¸‹é‡‡æ ·ï¼Œä»¥æå–å¤šå±‚æ¬¡çš„ç‰¹å¾ä¿¡æ¯ã€‚ä¸ä¹‹å‰çš„YOLOç‰ˆæœ¬ç›¸æ¯”ï¼ŒYOLOv8åœ¨ä¸»å¹²ç½‘ç»œä¸­å¼•å…¥äº†C2fæ¨¡å—ï¼Œå–ä»£äº†ä¼ ç»Ÿçš„C3æ¨¡å—ã€‚C2fæ¨¡å—å€Ÿé‰´äº†YOLOv7ä¸­çš„E-ELANç»“æ„ï¼Œé€šè¿‡å¼•å…¥æ›´å¤šçš„è·³å±‚è¿æ¥ï¼Œå¢å¼ºäº†æ¨¡å‹çš„æ¢¯åº¦æµåŠ¨æ€§ï¼Œä½¿å¾—ç‰¹å¾æå–æ›´åŠ é«˜æ•ˆã€‚è¿™ç§è®¾è®¡ä¸ä»…æå‡äº†æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ï¼Œè¿˜åœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°äº†æ¨¡å‹çš„è½»é‡åŒ–ï¼Œç¡®ä¿äº†åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„åº”ç”¨å¯è¡Œæ€§ã€‚

åœ¨ä¸»å¹²ç½‘ç»œçš„æœ«å°¾ï¼ŒYOLOv8ä¿ç•™äº†SPPFï¼ˆSpatial Pyramid Pooling Fastï¼‰æ¨¡å—ï¼Œè¯¥æ¨¡å—é€šè¿‡ä¸‰ä¸ªæœ€å¤§æ± åŒ–å±‚å¤„ç†å¤šå°ºåº¦ç‰¹å¾ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†ç½‘ç»œçš„ç‰¹å¾æŠ½è±¡èƒ½åŠ›ã€‚SPPFæ¨¡å—çš„å¼•å…¥ï¼Œä½¿å¾—YOLOv8èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†ä¸åŒå°ºå¯¸çš„ç›®æ ‡ï¼Œæå‡äº†æ¨¡å‹åœ¨å¤æ‚åœºæ™¯ä¸‹çš„è¡¨ç°ã€‚

é¢ˆéƒ¨ç½‘ç»œæ˜¯YOLOv8çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œè´Ÿè´£èåˆæ¥è‡ªä¸»å¹²ç½‘ç»œçš„ä¸åŒå°ºåº¦ç‰¹å¾å›¾ä¿¡æ¯ã€‚YOLOv8é‡‡ç”¨äº†FPNSï¼ˆFeature Pyramid Networkï¼‰å’ŒPANï¼ˆPath Aggregation Networkï¼‰ç»“æ„ï¼Œè¿™ä¸¤ç§ç»“æ„çš„ç»“åˆä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæœ‰æ•ˆåœ°æ•´åˆå¤šå±‚æ¬¡çš„ç‰¹å¾ä¿¡æ¯ï¼Œä»è€Œæé«˜æ£€æµ‹çš„ç²¾åº¦å’Œç¨³å®šæ€§ã€‚é€šè¿‡è¿™ç§ç‰¹å¾èåˆæœºåˆ¶ï¼ŒYOLOv8èƒ½å¤Ÿåœ¨å¤„ç†å°ç›®æ ‡å’Œå¤§ç›®æ ‡æ—¶ï¼Œä¿æŒè¾ƒé«˜çš„æ£€æµ‹æ€§èƒ½ã€‚

åœ¨å¤´éƒ¨ç½‘ç»œä¸­ï¼ŒYOLOv8é‡‡ç”¨äº†è§£è€¦çš„æ£€æµ‹å¤´è®¾è®¡ï¼Œè¿™ä¸€è®¾è®¡ç†å¿µæºè‡ªäºYOLOXæ¨¡å‹ã€‚å…·ä½“è€Œè¨€ï¼ŒYOLOv8çš„å¤´éƒ¨ç½‘ç»œç”±ä¸¤ä¸ªå¹¶è¡Œçš„å·ç§¯åˆ†æ”¯ç»„æˆï¼Œåˆ†åˆ«ç”¨äºè®¡ç®—ç›®æ ‡çš„ç±»åˆ«å’Œä½ç½®ç‰¹å¾ã€‚è¿™ç§åˆ†æ”¯ç»“æ„çš„è®¾è®¡ï¼Œä½¿å¾—åˆ†ç±»ä»»åŠ¡å’Œå®šä½ä»»åŠ¡å¯ä»¥ç‹¬ç«‹ä¼˜åŒ–ï¼Œåˆ†åˆ«å…³æ³¨ç‰¹å¾å›¾ä¸­æå–åˆ°çš„ç‰¹å¾ä¸å·²æœ‰ç±»åˆ«çš„ç›¸ä¼¼æ€§ï¼Œä»¥åŠè¾¹ç•Œæ¡†ä¸çœŸå®æ¡†ä¹‹é—´çš„ä½ç½®å…³ç³»ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒYOLOv8åœ¨æ”¶æ•›é€Ÿåº¦å’Œé¢„æµ‹ç²¾åº¦ä¸Šéƒ½æœ‰äº†æ˜¾è‘—æå‡ã€‚

å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒYOLOv8åœ¨æ£€æµ‹è¿‡ç¨‹ä¸­é‡‡ç”¨äº†æ— é”šæ¡†ç»“æ„ï¼Œç›´æ¥é¢„æµ‹ç›®æ ‡çš„ä¸­å¿ƒä½ç½®ï¼Œå¹¶å¼•å…¥äº†ä»»åŠ¡å¯¹é½å­¦ä¹ ï¼ˆTask Alignment Learningï¼ŒTALï¼‰æœºåˆ¶ã€‚è¿™ä¸€æœºåˆ¶é€šè¿‡å¼•å…¥åˆ†ç±»åˆ†æ•°å’ŒIOUï¼ˆIntersection over Unionï¼‰çš„é«˜æ¬¡å¹‚ä¹˜ç§¯ï¼Œä½œä¸ºè¡¡é‡ä»»åŠ¡å¯¹é½ç¨‹åº¦çš„æŒ‡æ ‡ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†æ¨¡å‹çš„åˆ†ç±»å’Œå®šä½æ€§èƒ½ã€‚é€šè¿‡è¿™ç§åˆ›æ–°ï¼ŒYOLOv8åœ¨åŒæ—¶æå‡å®šä½å’Œåˆ†ç±»çš„å‡†ç¡®æ€§æ–¹é¢ï¼Œè¡¨ç°å‡ºäº†ä¼˜è¶Šçš„èƒ½åŠ›ã€‚

åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒYOLOv8å¯¹æ•°æ®å¢å¼ºç­–ç•¥è¿›è¡Œäº†ä¼˜åŒ–ã€‚è™½ç„¶Mosaicæ•°æ®å¢å¼ºåœ¨æå‡æ¨¡å‹é²æ£’æ€§å’Œæ³›åŒ–æ€§æ–¹é¢æœ‰ä¸€å®šæ•ˆæœï¼Œä½†YOLOv8åœ¨è®­ç»ƒçš„æœ€å10ä¸ªepochä¸­åœæ­¢ä½¿ç”¨è¯¥ç­–ç•¥ï¼Œä»¥é¿å…ç ´åæ•°æ®çš„çœŸå®åˆ†å¸ƒã€‚è¿™ä¸€è°ƒæ•´ä½¿å¾—æ¨¡å‹åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æ›´åŠ ä¸“æ³¨äºçœŸå®æ•°æ®çš„ç‰¹å¾ï¼Œä»è€Œæå‡äº†æœ€ç»ˆçš„æ£€æµ‹æ•ˆæœã€‚

é€šè¿‡ä¸€ç³»åˆ—çš„ç»“æ„ä¼˜åŒ–å’Œåˆ›æ–°è®¾è®¡ï¼ŒYOLOv8åœ¨å¤šä¸ªç›®æ ‡æ£€æµ‹åŸºå‡†ä¸Šè¡¨ç°å‡ºè‰²ã€‚å°¤å…¶æ˜¯åœ¨COCOæ•°æ®é›†ä¸Šï¼ŒYOLOv8åœ¨ç›¸åŒæ¨¡å‹å°ºå¯¸ä¸‹ï¼Œå–å¾—äº†æ¯”å…¶ä»–YOLOç³»åˆ—æ¨¡å‹æ›´é«˜çš„ç²¾åº¦å’Œæ›´å¿«çš„æ¨ç†é€Ÿåº¦ã€‚å…·ä½“è€Œè¨€ï¼ŒYOLOv8åœ¨æ£€æµ‹ç²¾åº¦ï¼ˆmAP50-95ï¼‰å’Œæ¨ç†å»¶è¿Ÿæ–¹é¢çš„è¡¨ç°ï¼Œå‡ä¼˜äºä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæ˜¾ç¤ºå‡ºå…¶åœ¨å®é™…åº”ç”¨ä¸­çš„å·¨å¤§æ½œåŠ›ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8ä¸ä»…åœ¨ç»“æ„ä¸Šè¿›è¡Œäº†å¤šé¡¹åˆ›æ–°ï¼Œè¿˜åœ¨è®­ç»ƒç­–ç•¥å’Œæ•°æ®å¤„ç†ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ—¨åœ¨ä¸ºç›®æ ‡æ£€æµ‹ä»»åŠ¡æä¾›æ›´ä¸ºé«˜æ•ˆå’Œå‡†ç¡®çš„è§£å†³æ–¹æ¡ˆã€‚å…¶è½»é‡åŒ–è®¾è®¡å’Œé«˜æ•ˆçš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œä½¿å¾—YOLOv8åœ¨ç§»åŠ¨å¹³å°å’Œå®æ—¶åº”ç”¨ä¸­å…·å¤‡äº†å¹¿æ³›çš„åº”ç”¨å‰æ™¯ã€‚éšç€ç ”ç©¶çš„æ·±å…¥ï¼ŒYOLOv8æ— ç–‘å°†åœ¨ç›®æ ‡æ£€æµ‹é¢†åŸŸç»§ç»­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œæ¨åŠ¨ç›¸å…³æŠ€æœ¯çš„è¿›ä¸€æ­¥å‘å±•ã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\sam\modules\decoders.py



è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º `MaskDecoder` çš„ç±»ï¼Œä¸»è¦ç”¨äºç”Ÿæˆå›¾åƒçš„æ©ç ä»¥åŠç›¸å…³çš„è´¨é‡è¯„åˆ†ã€‚å®ƒä½¿ç”¨äº†å˜æ¢å™¨ï¼ˆTransformerï¼‰æ¶æ„æ¥æ ¹æ®å›¾åƒå’Œæç¤ºåµŒå…¥ï¼ˆprompt embeddingsï¼‰é¢„æµ‹æ©ç ã€‚æ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†ä¸€ä¸ªè¾…åŠ©ç±» `MLP`ï¼Œç”¨äºæ„å»ºå¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMulti-Layer Perceptronï¼‰æ¨¡å‹ã€‚

åœ¨ `MaskDecoder` ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåˆå§‹åŒ–äº†ä¸€äº›é‡è¦çš„å±æ€§ï¼ŒåŒ…æ‹¬å˜æ¢å™¨çš„ç»´åº¦ã€å˜æ¢å™¨æ¨¡å—æœ¬èº«ã€è¦é¢„æµ‹çš„æ©ç æ•°é‡ã€IoUï¼ˆIntersection over Unionï¼‰æ ‡è®°çš„åµŒå…¥ã€æ©ç æ ‡è®°çš„åµŒå…¥ã€è¾“å‡ºä¸Šé‡‡æ ·çš„ç¥ç»ç½‘ç»œåºåˆ—ä»¥åŠç”¨äºç”Ÿæˆæ©ç çš„è¶…ç½‘ç»œå¤šå±‚æ„ŸçŸ¥å™¨ï¼ˆMLPsï¼‰ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨äºé¢„æµ‹æ©ç è´¨é‡çš„MLPã€‚

`forward` æ–¹æ³•æ˜¯æ¨¡å‹çš„å‰å‘ä¼ æ’­å‡½æ•°ï¼Œæ¥æ”¶å›¾åƒåµŒå…¥ã€å›¾åƒçš„ä½ç½®ä¿¡æ¯ã€ç¨€ç–æç¤ºåµŒå…¥ã€å¯†é›†æç¤ºåµŒå…¥ä»¥åŠä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆæŒ‡ç¤ºæ˜¯å¦è¿”å›å¤šä¸ªæ©ç ï¼‰ã€‚å®ƒè°ƒç”¨ `predict_masks` æ–¹æ³•æ¥ç”Ÿæˆæ©ç å’ŒIoUé¢„æµ‹ï¼Œç„¶åæ ¹æ® `multimask_output` çš„å€¼é€‰æ‹©è¾“å‡ºçš„æ©ç å’ŒIoUé¢„æµ‹ã€‚

`predict_masks` æ–¹æ³•è´Ÿè´£å…·ä½“çš„æ©ç é¢„æµ‹è¿‡ç¨‹ã€‚å®ƒé¦–å…ˆå°†IoUæ ‡è®°å’Œæ©ç æ ‡è®°çš„æƒé‡è¿›è¡Œæ‹¼æ¥ï¼Œå¹¶ä¸ç¨€ç–æç¤ºåµŒå…¥ä¸€èµ·å½¢æˆè¾“å…¥æ ‡è®°ã€‚æ¥ç€ï¼Œå®ƒæ‰©å±•å›¾åƒåµŒå…¥ä»¥é€‚åº”æ¯ä¸ªæ©ç çš„é¢„æµ‹ï¼Œå¹¶å°†å…¶ä¸å¯†é›†æç¤ºåµŒå…¥ç›¸åŠ ã€‚ç„¶åï¼Œä½¿ç”¨å˜æ¢å™¨å¤„ç†è¿™äº›æ•°æ®ï¼Œå¾—åˆ°IoUæ ‡è®°å’Œæ©ç æ ‡è®°çš„è¾“å‡ºã€‚æœ€åï¼Œé€šè¿‡ä¸Šé‡‡æ ·å’Œè¶…ç½‘ç»œMLPsç”Ÿæˆæœ€ç»ˆçš„æ©ç ï¼Œå¹¶é¢„æµ‹IoUè´¨é‡ã€‚

`MLP` ç±»æ˜¯ä¸€ä¸ªç®€å•çš„å¤šå±‚æ„ŸçŸ¥å™¨å®ç°ï¼ŒåŒ…å«å¤šä¸ªçº¿æ€§å±‚å’ŒReLUæ¿€æ´»å‡½æ•°ã€‚æ„é€ å‡½æ•°ä¸­å®šä¹‰äº†è¾“å…¥ç»´åº¦ã€éšè—å±‚ç»´åº¦ã€è¾“å‡ºç»´åº¦å’Œå±‚æ•°ã€‚`forward` æ–¹æ³•æ‰§è¡Œå‰å‘ä¼ æ’­ï¼Œå¹¶åœ¨æœ€åä¸€å±‚åº”ç”¨sigmoidæ¿€æ´»ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†ä¸€ä¸ªå¤æ‚çš„æ©ç è§£ç å™¨ï¼Œç»“åˆäº†æ·±åº¦å­¦ä¹ ä¸­çš„å˜æ¢å™¨å’Œå¤šå±‚æ„ŸçŸ¥å™¨ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°å¤„ç†å›¾åƒæ©ç çš„ç”Ÿæˆå’Œè´¨é‡è¯„ä¼°ã€‚

#### 11.1 code\log.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
import os
import time
import cv2
import pandas as pd
from PIL import Image

def save_chinese_image(file_path, image_array):
    """
    ä¿å­˜å¸¦æœ‰ä¸­æ–‡è·¯å¾„çš„å›¾ç‰‡æ–‡ä»¶

    å‚æ•°ï¼š
    file_path (str): å›¾ç‰‡çš„ä¿å­˜è·¯å¾„ï¼Œåº”åŒ…å«ä¸­æ–‡å­—ç¬¦
    image_array (numpy.ndarray): è¦ä¿å­˜çš„ OpenCV å›¾åƒï¼ˆå³ numpy æ•°ç»„ï¼‰
    """
    try:
        # å°† OpenCV å›¾ç‰‡è½¬æ¢ä¸º Pillow Image å¯¹è±¡
        image = Image.fromarray(cv2.cvtColor(image_array, cv2.COLOR_BGR2RGB))
        # ä½¿ç”¨ Pillow ä¿å­˜å›¾ç‰‡æ–‡ä»¶
        image.save(file_path)
        print(f"æˆåŠŸä¿å­˜å›¾åƒåˆ°: {file_path}")
    except Exception as e:
        print(f"ä¿å­˜å›¾åƒå¤±è´¥: {str(e)}")

class LogTable:
    def __init__(self, csv_file_path=None):
        """
        åˆå§‹åŒ–LogTableç±»å®ä¾‹ã€‚

        å‚æ•°ï¼š
        csv_file_path (str): ä¿å­˜åˆå§‹æ•°æ®çš„CSVæ–‡ä»¶è·¯å¾„ã€‚
        """
        self.csv_file_path = csv_file_path
        # åˆå§‹åŒ–ä¿å­˜å›¾åƒå’Œç»“æœçš„åˆ—è¡¨
        self.saved_images = []
        self.saved_results = []

        # å°è¯•ä»CSVæ–‡ä»¶åŠ è½½æ•°æ®ï¼Œå¦‚æœå¤±è´¥åˆ™åˆ›å»ºä¸€ä¸ªç©ºçš„DataFrame
        columns = ['æ–‡ä»¶è·¯å¾„', 'è¯†åˆ«ç»“æœ', 'ä½ç½®', 'é¢ç§¯', 'æ—¶é—´']
        if not os.path.exists(csv_file_path):
            # å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªå¸¦æœ‰åˆå§‹è¡¨å¤´çš„ç©ºDataFrameå¹¶ä¿å­˜ä¸ºCSVæ–‡ä»¶
            empty_df = pd.DataFrame(columns=columns)
            empty_df.to_csv(csv_file_path, index=False, header=True)
        self.data = pd.DataFrame(columns=columns)

    def add_log_entry(self, file_path, recognition_result, position, confidence, time_spent):
        """
        å‘æ—¥å¿—ä¸­æ·»åŠ ä¸€æ¡æ–°è®°å½•ã€‚

        å‚æ•°ï¼š
        file_path (str): æ–‡ä»¶è·¯å¾„
        recognition_result (str): è¯†åˆ«ç»“æœ
        position (str): ä½ç½®
        confidence (float): ç½®ä¿¡åº¦
        time_spent (float): ç”¨æ—¶ï¼ˆé€šå¸¸æ˜¯ç§’æˆ–æ¯«ç§’ï¼‰

        è¿”å›ï¼š
        None
        """
        # åˆ›å»ºæ–°çš„æ•°æ®è¡Œ
        new_entry = pd.DataFrame([[file_path, recognition_result, position, confidence, time_spent]],
                                 columns=['æ–‡ä»¶è·¯å¾„', 'è¯†åˆ«ç»“æœ', 'ä½ç½®', 'é¢ç§¯', 'æ—¶é—´'])
        # å°†æ–°è¡Œæ·»åŠ åˆ°DataFrameä¸­
        self.data = pd.concat([new_entry, self.data]).reset_index(drop=True)

    def save_to_csv(self):
        """
        å°†æ›´æ–°åçš„DataFrameä¿å­˜åˆ°CSVæ–‡ä»¶ã€‚
        """
        self.data.to_csv(self.csv_file_path, index=False, encoding='utf-8', mode='a', header=False)

    def clear_data(self):
        """
        æ¸…ç©ºå½“å‰æ•°æ®ã€‚
        """
        columns = ['æ–‡ä»¶è·¯å¾„', 'è¯†åˆ«ç»“æœ', 'ä½ç½®', 'é¢ç§¯', 'æ—¶é—´']
        self.data = pd.DataFrame(columns=columns)
```

### ä»£ç è¯´æ˜ï¼š
1. **save_chinese_image**ï¼šè¯¥å‡½æ•°ç”¨äºä¿å­˜å¸¦æœ‰ä¸­æ–‡è·¯å¾„çš„å›¾åƒã€‚å®ƒå°†OpenCVæ ¼å¼çš„å›¾åƒè½¬æ¢ä¸ºPillowæ ¼å¼ï¼Œå¹¶ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ã€‚

2. **LogTableç±»**ï¼š
   - **__init__**ï¼šåˆå§‹åŒ–ç±»å®ä¾‹ï¼Œæ£€æŸ¥CSVæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºDataFrameã€‚
   - **add_log_entry**ï¼šå‘æ—¥å¿—ä¸­æ·»åŠ ä¸€æ¡æ–°è®°å½•ï¼Œè®°å½•æ–‡ä»¶è·¯å¾„ã€è¯†åˆ«ç»“æœã€ä½ç½®ã€ç½®ä¿¡åº¦å’Œç”¨æ—¶ã€‚
   - **save_to_csv**ï¼šå°†å½“å‰çš„DataFrameä¿å­˜åˆ°CSVæ–‡ä»¶ä¸­ã€‚
   - **clear_data**ï¼šæ¸…ç©ºå½“å‰çš„æ•°æ®ï¼Œé‡ç½®DataFrameã€‚ 

ä»¥ä¸Šæ˜¯æ ¸å¿ƒä»£ç éƒ¨åˆ†åŠå…¶è¯¦ç»†æ³¨é‡Šï¼Œä¾¿äºç†è§£å…¶åŠŸèƒ½å’Œç”¨é€”ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶`log.py`ä¸»è¦ç”¨äºå¤„ç†å›¾åƒæ•°æ®å’Œè®°å½•æ£€æµ‹ç»“æœã€‚å®ƒä½¿ç”¨äº†å¤šä¸ªåº“ï¼ŒåŒ…æ‹¬`os`ã€`time`ã€`cv2`ï¼ˆOpenCVï¼‰ã€`pandas`ã€`PIL`ï¼ˆPillowï¼‰å’Œ`numpy`ï¼Œå¹¶ä¸”æ¶‰åŠåˆ°å›¾åƒçš„ä¿å­˜ã€ç»“æœçš„è®°å½•å’Œæ•°æ®çš„ç®¡ç†ã€‚

é¦–å…ˆï¼Œç¨‹åºå®šä¹‰äº†ä¸€ä¸ª`save_chinese_image`å‡½æ•°ï¼Œç”¨äºä¿å­˜å¸¦æœ‰ä¸­æ–‡è·¯å¾„çš„å›¾åƒæ–‡ä»¶ã€‚è¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šæ–‡ä»¶è·¯å¾„å’Œå›¾åƒæ•°ç»„ã€‚å®ƒå°è¯•å°†OpenCVæ ¼å¼çš„å›¾åƒè½¬æ¢ä¸ºPillowæ ¼å¼ï¼Œç„¶åä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ã€‚å¦‚æœä¿å­˜å¤±è´¥ï¼Œä¼šæ•è·å¼‚å¸¸å¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†ä¸€ä¸ª`ResultLogger`ç±»ï¼Œç”¨äºè®°å½•æ£€æµ‹ç»“æœã€‚è¯¥ç±»åœ¨åˆå§‹åŒ–æ—¶åˆ›å»ºä¸€ä¸ªç©ºçš„DataFrameï¼ŒåŒ…å«â€œè¯†åˆ«ç»“æœâ€ã€â€œä½ç½®â€ã€â€œé¢ç§¯â€å’Œâ€œæ—¶é—´â€å››ä¸ªåˆ—ã€‚`concat_results`æ–¹æ³•ç”¨äºå°†æ–°çš„æ£€æµ‹ç»“æœæ·»åŠ åˆ°DataFrameä¸­ï¼Œæ¥æ”¶ç»“æœã€ä½ç½®ã€ç½®ä¿¡åº¦å’Œæ—¶é—´ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›æ›´æ–°åçš„DataFrameã€‚

ç„¶åæ˜¯`LogTable`ç±»ï¼Œå®ƒç”¨äºç®¡ç†å›¾åƒå’Œç»“æœçš„è®°å½•ã€‚è¯¥ç±»åœ¨åˆå§‹åŒ–æ—¶å°è¯•ä»æŒ‡å®šçš„CSVæ–‡ä»¶åŠ è½½æ•°æ®ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºDataFrameã€‚`add_frames`æ–¹æ³•ç”¨äºæ·»åŠ å›¾åƒå’Œæ£€æµ‹ä¿¡æ¯ï¼Œ`clear_frames`æ–¹æ³•ç”¨äºæ¸…ç©ºå·²ä¿å­˜çš„å›¾åƒå’Œç»“æœã€‚`save_frames_file`æ–¹æ³•æ ¹æ®ä¿å­˜çš„å›¾åƒæ•°é‡å†³å®šæ˜¯ä¿å­˜ä¸ºå•å¼ å›¾ç‰‡è¿˜æ˜¯è§†é¢‘ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°æŒ‡å®šè·¯å¾„ã€‚

æ­¤å¤–ï¼Œ`add_log_entry`æ–¹æ³•ç”¨äºå‘æ—¥å¿—ä¸­æ·»åŠ æ–°è®°å½•ï¼Œæ¥æ”¶æ–‡ä»¶è·¯å¾„ã€è¯†åˆ«ç»“æœã€ä½ç½®ã€ç½®ä¿¡åº¦å’Œç”¨æ—¶ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†æ–°è®°å½•æ·»åŠ åˆ°DataFrameä¸­ã€‚`clear_data`æ–¹æ³•ç”¨äºæ¸…ç©ºDataFrameï¼Œ`save_to_csv`æ–¹æ³•å°†æ›´æ–°åçš„DataFrameä¿å­˜åˆ°CSVæ–‡ä»¶ä¸­ã€‚

æœ€åï¼Œ`update_table`æ–¹æ³•ç”¨äºæ›´æ–°è¡¨æ ¼ï¼Œæ˜¾ç¤ºæœ€æ–°çš„500æ¡è®°å½•ï¼Œé€‚ç”¨äºä¸Streamlitç­‰æ¡†æ¶ç»“åˆä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·ç•Œé¢ä¸Šå±•ç¤ºæ•°æ®ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºæ–‡ä»¶æä¾›äº†ä¸€å¥—å®Œæ•´çš„åŠŸèƒ½ï¼Œç”¨äºå›¾åƒçš„å¤„ç†ã€ç»“æœçš„è®°å½•å’Œæ•°æ®çš„ç®¡ç†ï¼Œé€‚åˆç”¨äºéœ€è¦è®°å½•å’Œåˆ†æå›¾åƒæ£€æµ‹ç»“æœçš„åº”ç”¨åœºæ™¯ã€‚

#### 11.2 ui.py

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")


# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šæ‚¨çš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬åç§°

    # è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†åŠæ³¨é‡Š

1. **å¯¼å…¥å¿…è¦çš„æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ã€‚
   - `subprocess`ï¼šç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤å’Œç¨‹åºã€‚

2. **å®šä¹‰ `run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªè„šæœ¬è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå¹¶åœ¨å½“å‰ Python ç¯å¢ƒä¸­è¿è¡Œè¯¥è„šæœ¬ã€‚

3. **è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„**ï¼š
   - `python_path = sys.executable`ï¼šè·å–å½“å‰æ­£åœ¨ä½¿ç”¨çš„ Python è§£é‡Šå™¨çš„å®Œæ•´è·¯å¾„ã€‚

4. **æ„å»ºè¿è¡Œå‘½ä»¤**ï¼š
   - `command = f'"{python_path}" -m streamlit run "{script_path}"'`ï¼šæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œç”¨äºè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚è¿™é‡Œä½¿ç”¨äº† `streamlit` æ¨¡å—æ¥è¿è¡Œ Python è„šæœ¬ã€‚

5. **æ‰§è¡Œå‘½ä»¤**ï¼š
   - `result = subprocess.run(command, shell=True)`ï¼šä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œæ„å»ºçš„å‘½ä»¤ã€‚`shell=True` å…è®¸åœ¨ shell ä¸­æ‰§è¡Œå‘½ä»¤ã€‚

6. **æ£€æŸ¥å‘½ä»¤æ‰§è¡Œç»“æœ**ï¼š
   - `if result.returncode != 0:`ï¼šæ£€æŸ¥å‘½ä»¤çš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º 0ï¼Œè¡¨ç¤ºæ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€‚

7. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - `if __name__ == "__main__":`ï¼šç¡®ä¿è¯¥ä»£ç å—ä»…åœ¨ç›´æ¥è¿è¡Œè¯¥è„šæœ¬æ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¢«å¯¼å…¥æ—¶æ‰§è¡Œã€‚
   - `script_path = "web.py"`ï¼šæŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬æ–‡ä»¶åã€‚
   - `run_script(script_path)`ï¼šè°ƒç”¨ `run_script` å‡½æ•°ï¼Œä¼ å…¥è„šæœ¬è·¯å¾„ä»¥æ‰§è¡Œè¯¥è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å½“å‰çš„ Python ç¯å¢ƒæ¥è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ¥è¯´æ˜¯è¿è¡Œä¸€ä¸ªåä¸º `web.py` çš„è„šæœ¬ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œä»¥åŠä¸€ä¸ªè‡ªå®šä¹‰çš„ `abs_path` å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯èƒ½ç”¨äºè·å–è„šæœ¬çš„ç»å¯¹è·¯å¾„ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ Python ç¯å¢ƒæ¥æ‰§è¡Œè„šæœ¬ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå‘½ä»¤ä½¿ç”¨ `streamlit` æ¨¡å—æ¥è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚`streamlit` æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºæ•°æ®åº”ç”¨çš„åº“ï¼Œå› æ­¤è¿™ä¸ªç¨‹åºå¯èƒ½æ˜¯ä¸ºäº†å¯åŠ¨ä¸€ä¸ªæ•°æ®åº”ç”¨ã€‚

éšåï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ¥æ‰§è¡Œæ„å»ºå¥½çš„å‘½ä»¤ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚å¦‚æœå‘½ä»¤æ‰§è¡Œçš„è¿”å›ç ä¸ä¸ºé›¶ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œå‡ºé”™ï¼Œç¨‹åºä¼šæ‰“å°å‡ºé”™è¯¯ä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` è¯­å¥æ¥ç¡®ä¿åªæœ‰åœ¨ç›´æ¥è¿è¡Œè¿™ä¸ªæ–‡ä»¶æ—¶æ‰ä¼šæ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚åœ¨è¿™é‡Œï¼ŒæŒ‡å®šäº†è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ä¸º `web.py`ï¼Œå¹¶è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¿™ä¸ªè„šæœ¬ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºæ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬å¯åŠ¨å™¨ï¼Œèƒ½å¤Ÿåœ¨å½“å‰ Python ç¯å¢ƒä¸­è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„ Python è„šæœ¬ï¼Œå¹¶å¤„ç†å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚

#### 11.3 code\ultralytics\utils\plotting.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class Colors:
    """
    Ultralytics é»˜è®¤é¢œè‰²è°ƒè‰²æ¿ï¼Œæä¾›äº†å¤„ç†é¢œè‰²çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬å°†åå…­è¿›åˆ¶é¢œè‰²ä»£ç è½¬æ¢ä¸º RGB å€¼ã€‚
    """

    def __init__(self):
        """åˆå§‹åŒ–é¢œè‰²è°ƒè‰²æ¿ï¼Œä½¿ç”¨ matplotlib çš„é»˜è®¤é¢œè‰²ã€‚"""
        hexs = (
            "FF3838", "FF9D97", "FF701F", "FFB21D", "CFD231",
            "48F90A", "92CC17", "3DDB86", "1A9334", "00D4BB",
            "2C99A8", "00C2FF", "344593", "6473FF", "0018EC",
            "8438FF", "520085", "CB38FF", "FF95C8", "FF37C7",
        )
        # å°†åå…­è¿›åˆ¶é¢œè‰²è½¬æ¢ä¸º RGB å¹¶å­˜å‚¨åœ¨è°ƒè‰²æ¿ä¸­
        self.palette = [self.hex2rgb(f"#{c}") for c in hexs]
        self.n = len(self.palette)  # è°ƒè‰²æ¿ä¸­é¢œè‰²çš„æ•°é‡
        # å®šä¹‰ç‰¹å®šçš„é¢œè‰²è°ƒè‰²æ¿
        self.pose_palette = np.array(
            [
                [255, 128, 0], [255, 153, 51], [255, 178, 102],
                [230, 230, 0], [255, 153, 255], [153, 204, 255],
                [255, 102, 255], [255, 51, 255], [102, 178, 255],
                [51, 153, 255], [255, 153, 153], [255, 102, 102],
                [255, 51, 51], [153, 255, 153], [102, 255, 102],
                [51, 255, 51], [0, 255, 0], [0, 0, 255],
                [255, 0, 0], [255, 255, 255],
            ],
            dtype=np.uint8,
        )

    def __call__(self, i, bgr=False):
        """æ ¹æ®ç´¢å¼•è¿”å›é¢œè‰²ï¼Œå¦‚æœ bgr ä¸º Trueï¼Œåˆ™è¿”å› BGR æ ¼å¼çš„é¢œè‰²ã€‚"""
        c = self.palette[int(i) % self.n]
        return (c[2], c[1], c[0]) if bgr else c

    @staticmethod
    def hex2rgb(h):
        """å°†åå…­è¿›åˆ¶é¢œè‰²ä»£ç è½¬æ¢ä¸º RGB å€¼ï¼ˆå³ PIL é»˜è®¤é¡ºåºï¼‰ã€‚"""
        return tuple(int(h[1 + i : 1 + i + 2], 16) for i in (0, 2, 4))


class Annotator:
    """
    Ultralytics æ³¨é‡Šå™¨ï¼Œç”¨äºè®­ç»ƒ/éªŒè¯é©¬èµ›å…‹å’Œ JPG å›¾åƒçš„æ³¨é‡Šã€‚
    """

    def __init__(self, im, line_width=None, font_size=None, font="Arial.ttf", pil=False, example="abc"):
        """åˆå§‹åŒ– Annotator ç±»ï¼Œè®¾ç½®å›¾åƒã€çº¿å®½å’Œé¢œè‰²è°ƒè‰²æ¿ã€‚"""
        assert im.data.contiguous, "å›¾åƒä¸è¿ç»­ã€‚è¯·å¯¹è¾“å…¥å›¾åƒåº”ç”¨ np.ascontiguousarray(im)ã€‚"
        non_ascii = not is_ascii(example)  # æ£€æŸ¥æ˜¯å¦åŒ…å«é ASCII å­—ç¬¦
        self.pil = pil or non_ascii  # æ ¹æ®æ˜¯å¦ä½¿ç”¨ PIL è¿›è¡Œåˆå§‹åŒ–
        self.lw = line_width or max(round(sum(im.shape) / 2 * 0.003), 2)  # çº¿å®½
        if self.pil:  # ä½¿ç”¨ PIL
            self.im = im if isinstance(im, Image.Image) else Image.fromarray(im)
            self.draw = ImageDraw.Draw(self.im)
            try:
                font = check_font("Arial.Unicode.ttf" if non_ascii else font)
                size = font_size or max(round(sum(self.im.size) / 2 * 0.035), 12)
                self.font = ImageFont.truetype(str(font), size)
            except Exception:
                self.font = ImageFont.load_default()
        else:  # ä½¿ç”¨ cv2
            self.im = im if im.flags.writeable else im.copy()
            self.tf = max(self.lw - 1, 1)  # å­—ä½“åšåº¦
            self.sf = self.lw / 3  # å­—ä½“ç¼©æ”¾

    def box_label(self, box, label="", color=(128, 128, 128), txt_color=(255, 255, 255), rotated=False):
        """åœ¨å›¾åƒä¸Šæ·»åŠ ä¸€ä¸ªå¸¦æ ‡ç­¾çš„çŸ©å½¢æ¡†ã€‚"""
        if isinstance(box, torch.Tensor):
            box = box.tolist()
        if self.pil or not is_ascii(label):
            if rotated:
                self.draw.polygon([tuple(b) for b in box], width=self.lw, outline=color)  # ç»˜åˆ¶å¤šè¾¹å½¢
            else:
                self.draw.rectangle(box, width=self.lw, outline=color)  # ç»˜åˆ¶çŸ©å½¢
            if label:
                w, h = self.font.getsize(label)  # è·å–æ–‡æœ¬å®½åº¦å’Œé«˜åº¦
                self.draw.rectangle(
                    (box[0], box[1] - h, box[0] + w + 1, box[1] + 1),
                    fill=color,
                )
                self.draw.text((box[0], box[1] - h), label, fill=txt_color, font=self.font)
        else:  # cv2
            p1, p2 = (int(box[0]), int(box[1])), (int(box[2]), int(box[3]))
            cv2.rectangle(self.im, p1, p2, color, thickness=self.lw, lineType=cv2.LINE_AA)  # ç»˜åˆ¶çŸ©å½¢
            if label:
                w, h = cv2.getTextSize(label, 0, fontScale=self.sf, thickness=self.tf)[0]  # è·å–æ–‡æœ¬å®½åº¦å’Œé«˜åº¦
                cv2.rectangle(self.im, p1, (p1[0] + w, p1[1] - h - 3), color, -1, cv2.LINE_AA)  # å¡«å……èƒŒæ™¯
                cv2.putText(self.im, label, (p1[0], p1[1] - 2), 0, self.sf, txt_color, thickness=self.tf, lineType=cv2.LINE_AA)

    def result(self):
        """è¿”å›æ³¨é‡Šåçš„å›¾åƒä½œä¸ºæ•°ç»„ã€‚"""
        return np.asarray(self.im)
```

ä»¥ä¸Šä»£ç åŒ…å«äº†é¢œè‰²å¤„ç†å’Œå›¾åƒæ³¨é‡Šçš„æ ¸å¿ƒåŠŸèƒ½ã€‚`Colors` ç±»ç”¨äºå¤„ç†é¢œè‰²çš„è½¬æ¢ï¼Œè€Œ `Annotator` ç±»åˆ™ç”¨äºåœ¨å›¾åƒä¸Šç»˜åˆ¶çŸ©å½¢æ¡†å’Œæ ‡ç­¾ã€‚è¿™äº›åŠŸèƒ½åœ¨è®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸­éå¸¸å¸¸è§ï¼Œå°¤å…¶æ˜¯åœ¨ç›®æ ‡æ£€æµ‹å’Œå›¾åƒæ ‡æ³¨çš„åº”ç”¨ä¸­ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯Ultralytics YOLOé¡¹ç›®ä¸­çš„ä¸€ä¸ªç»˜å›¾å·¥å…·æ¨¡å—ï¼Œä¸»è¦ç”¨äºå›¾åƒçš„å¯è§†åŒ–å’Œæ ‡æ³¨ã€‚å®ƒåŒ…å«å¤šä¸ªç±»å’Œå‡½æ•°ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¥å¤„ç†å›¾åƒæ•°æ®ï¼Œç»˜åˆ¶è¾¹ç•Œæ¡†ã€å…³é”®ç‚¹ã€æ©è†œç­‰ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¿å­˜å’Œå±•ç¤ºç»“æœã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“ï¼ŒåŒ…æ‹¬`cv2`ã€`matplotlib`ã€`numpy`ã€`torch`å’Œ`PIL`ç­‰ï¼Œè¿™äº›åº“ä¸ºå›¾åƒå¤„ç†å’Œç»˜å›¾æä¾›äº†æ”¯æŒã€‚æ¥ç€ï¼Œå®šä¹‰äº†ä¸€ä¸ª`Colors`ç±»ï¼Œç”¨äºç®¡ç†é¢œè‰²è°ƒè‰²æ¿ï¼ŒåŒ…æ‹¬å°†åå…­è¿›åˆ¶é¢œè‰²ä»£ç è½¬æ¢ä¸ºRGBå€¼çš„åŠŸèƒ½ã€‚è¿™ä¸ªç±»åˆå§‹åŒ–äº†ä¸€ç»„é»˜è®¤çš„é¢œè‰²ï¼Œç”¨äºåç»­çš„ç»˜å›¾æ“ä½œã€‚

æ¥ä¸‹æ¥ï¼Œå®šä¹‰äº†`Annotator`ç±»ï¼Œå®ƒæ˜¯ä¸»è¦çš„å›¾åƒæ ‡æ³¨å·¥å…·ã€‚è¿™ä¸ªç±»çš„æ„é€ å‡½æ•°æ¥å—å›¾åƒã€çº¿å®½ã€å­—ä½“ç­‰å‚æ•°ï¼Œå¹¶æ ¹æ®ä½¿ç”¨çš„ç»˜å›¾åº“ï¼ˆPILæˆ–cv2ï¼‰è¿›è¡Œç›¸åº”çš„åˆå§‹åŒ–ã€‚`Annotator`ç±»æä¾›äº†å¤šç§æ–¹æ³•æ¥ç»˜åˆ¶è¾¹ç•Œæ¡†ã€å…³é”®ç‚¹ã€æ–‡æœ¬å’Œæ©è†œç­‰ã€‚å…·ä½“æ¥è¯´ï¼Œ`box_label`æ–¹æ³•ç”¨äºåœ¨å›¾åƒä¸Šç»˜åˆ¶å¸¦æ ‡ç­¾çš„è¾¹ç•Œæ¡†ï¼Œ`masks`æ–¹æ³•ç”¨äºç»˜åˆ¶æ©è†œï¼Œ`kpts`æ–¹æ³•ç”¨äºç»˜åˆ¶å…³é”®ç‚¹åŠå…¶è¿æ¥çº¿ï¼Œ`rectangle`å’Œ`text`æ–¹æ³•ç”¨äºç»˜åˆ¶çŸ©å½¢å’Œæ–‡æœ¬ã€‚

æ­¤å¤–ï¼Œ`Annotator`ç±»è¿˜å®ç°äº†ä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚ç»˜åˆ¶åŒºåŸŸã€è·Ÿè¸ªè½¨è¿¹ã€è®¡æ•°æ ‡ç­¾ã€ç»˜åˆ¶ç‰¹å®šå…³é”®ç‚¹ã€ç»˜åˆ¶è§’åº¦å’Œè®¡æ•°ç­‰ã€‚è¿™äº›åŠŸèƒ½ä½¿å¾—è¯¥ç±»åœ¨å¤„ç†å¤æ‚çš„å›¾åƒæ ‡æ³¨ä»»åŠ¡æ—¶éå¸¸çµæ´»å’Œå¼ºå¤§ã€‚

æ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œå¦‚`plot_labels`ã€`save_one_box`ã€`plot_images`å’Œ`plot_results`ç­‰ã€‚è¿™äº›å‡½æ•°ç”¨äºç»˜åˆ¶è®­ç»ƒæ ‡ç­¾ã€ä¿å­˜å›¾åƒè£å‰ªã€ç»˜åˆ¶å›¾åƒç½‘æ ¼å’Œç»˜åˆ¶è®­ç»ƒç»“æœç­‰ã€‚`plot_labels`å‡½æ•°ç”Ÿæˆç±»ç›´æ–¹å›¾å’Œè¾¹ç•Œæ¡†ç»Ÿè®¡ä¿¡æ¯ï¼Œ`save_one_box`å‡½æ•°æ ¹æ®ç»™å®šçš„è¾¹ç•Œæ¡†è£å‰ªå¹¶ä¿å­˜å›¾åƒï¼Œ`plot_images`å‡½æ•°ç»˜åˆ¶å¸¦æ ‡ç­¾çš„å›¾åƒç½‘æ ¼ï¼Œ`plot_results`å‡½æ•°ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶è®­ç»ƒç»“æœã€‚

æœ€åï¼Œæ–‡ä»¶è¿˜æä¾›äº†ä¸€äº›ç”¨äºå¯è§†åŒ–ç‰¹å¾å›¾çš„å‡½æ•°ï¼Œå¦‚`feature_visualization`ï¼Œå¯ä»¥åœ¨æ¨ç†è¿‡ç¨‹ä¸­å¯è§†åŒ–æ¨¡å‹æ¨¡å—çš„ç‰¹å¾å›¾ã€‚è¿™äº›åŠŸèƒ½ä½¿å¾—è¯¥æ¨¡å—åœ¨YOLOæ¨¡å‹çš„è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿæœ‰æ•ˆåœ°è¿›è¡Œç»“æœåˆ†æå’Œå¯è§†åŒ–ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£æ¨¡å‹çš„è¡¨ç°å’Œæ”¹è¿›æ–¹å‘ã€‚

#### 11.4 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    DetectionTrainerç±»ï¼Œç»§æ‰¿è‡ªBaseTrainerç±»ï¼Œç”¨äºåŸºäºæ£€æµ‹æ¨¡å‹çš„è®­ç»ƒã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»ºYOLOæ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œ`train`è¡¨ç¤ºè®­ç»ƒæ¨¡å¼ï¼Œ`val`è¡¨ç¤ºéªŒè¯æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„æ•°æ®å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº`rect`æ¨¡å¼ã€‚é»˜è®¤ä¸ºNoneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æ˜¯è®­ç»ƒæˆ–éªŒè¯
        with torch_distributed_zero_first(rank):  # åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œç¡®ä¿æ•°æ®é›†åªåˆå§‹åŒ–ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True'ä¸DataLoaderçš„shuffleä¸å…¼å®¹ï¼Œè®¾ç½®shuffle=False")
            shuffle = False
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©å›¾åƒå¤§å°
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:  # å¦‚æœç¼©æ”¾å› å­ä¸ä¸º1
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼
            batch["img"] = imgs  # æ›´æ–°å›¾åƒ
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å›YOLOæ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›ç”¨äºYOLOæ¨¡å‹éªŒè¯çš„DetectionValidatorã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )  # è¿”å›éªŒè¯å™¨

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )  # ç»˜åˆ¶å›¾åƒ

    def plot_metrics(self):
        """ä»CSVæ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è§£é‡Šï¼š
1. **DetectionTrainerç±»**ï¼šè¯¥ç±»ç”¨äºè®­ç»ƒYOLOæ£€æµ‹æ¨¡å‹ï¼Œç»§æ‰¿è‡ªåŸºç¡€è®­ç»ƒç±»`BaseTrainer`ã€‚
2. **build_datasetæ–¹æ³•**ï¼šæ„å»ºYOLOæ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®å¢å¼ºã€‚
3. **get_dataloaderæ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒä¸­åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ã€‚
4. **preprocess_batchæ–¹æ³•**ï¼šå¯¹è¾“å…¥çš„å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¤šå°ºåº¦è°ƒæ•´ã€‚
5. **get_modelæ–¹æ³•**ï¼šåˆ›å»ºå¹¶è¿”å›YOLOæ£€æµ‹æ¨¡å‹ï¼Œæ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **get_validatoræ–¹æ³•**ï¼šè¿”å›ç”¨äºæ¨¡å‹éªŒè¯çš„éªŒè¯å™¨ï¼Œè®°å½•æŸå¤±åç§°ã€‚
7. **plot_training_sampleså’Œplot_metricsæ–¹æ³•**ï¼šç”¨äºå¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒæŒ‡æ ‡ï¼Œå¸®åŠ©ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„å®ç°ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚ç¨‹åºçš„ä¸»è¦åŠŸèƒ½æ˜¯æ„å»ºæ•°æ®é›†ã€åŠ è½½æ•°æ®ã€é¢„å¤„ç†å›¾åƒã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€éªŒè¯æ¨¡å‹ã€è®°å½•æŸå¤±ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ç­‰ã€‚

é¦–å…ˆï¼Œç¨‹åºå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬æ•°å­¦è¿ç®—ã€éšæœºæ•°ç”Ÿæˆã€æ·±åº¦å­¦ä¹ æ¡†æ¶ PyTorch ç›¸å…³çš„æ¨¡å—ï¼Œä»¥åŠ Ultralytics æä¾›çš„ YOLO ç›¸å…³åŠŸèƒ½æ¨¡å—ã€‚æ¥ç€å®šä¹‰äº† `DetectionTrainer` ç±»ï¼Œè¯¥ç±»ä¸»è¦ç”¨äºè®­ç»ƒç›®æ ‡æ£€æµ‹æ¨¡å‹ã€‚

åœ¨ `DetectionTrainer` ç±»ä¸­ï¼Œ`build_dataset` æ–¹æ³•ç”¨äºæ„å»º YOLO æ•°æ®é›†ã€‚è¯¥æ–¹æ³•æ¥æ”¶å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹æ¬¡å¤§å°ä½œä¸ºå‚æ•°ï¼Œåˆ©ç”¨ `build_yolo_dataset` å‡½æ•°ç”Ÿæˆæ•°æ®é›†ã€‚æ•°æ®é›†çš„æ„å»ºè€ƒè™‘äº†æ¨¡å‹çš„æ­¥å¹…å’Œæ¨¡å¼ï¼Œä»¥ä¾¿åœ¨éªŒè¯æ¨¡å¼ä¸‹ä½¿ç”¨çŸ©å½¢å¡«å……ã€‚

`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºæ•°æ®åŠ è½½å™¨ï¼Œç¡®ä¿åœ¨åˆ†å¸ƒå¼è®­ç»ƒæ—¶åªåˆå§‹åŒ–ä¸€æ¬¡æ•°æ®é›†ã€‚è¯¥æ–¹æ³•æ ¹æ®æ¨¡å¼å†³å®šæ˜¯å¦æ‰“ä¹±æ•°æ®ï¼Œå¹¶è®¾ç½®å·¥ä½œçº¿ç¨‹çš„æ•°é‡ã€‚è¿”å›çš„åŠ è½½å™¨å¯ä»¥åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­é«˜æ•ˆåœ°è¯»å–æ•°æ®ã€‚

`preprocess_batch` æ–¹æ³•è´Ÿè´£å¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°é€‚å½“çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°æ ¼å¼ã€‚æ­¤æ–¹æ³•è¿˜æ”¯æŒå¤šå°ºåº¦è®­ç»ƒï¼Œéšæœºé€‰æ‹©å›¾åƒå¤§å°è¿›è¡Œè®­ç»ƒï¼Œä»¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ç­‰ï¼Œä»¥ç¡®ä¿æ¨¡å‹èƒ½å¤Ÿæ­£ç¡®å¤„ç†ç‰¹å®šæ•°æ®é›†çš„ä»»åŠ¡ã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹å®ä¾‹ï¼Œå¯ä»¥é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚`get_validator` æ–¹æ³•åˆ™è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯æ¨¡å‹æ€§èƒ½çš„éªŒè¯å™¨ã€‚

åœ¨æŸå¤±è®°å½•æ–¹é¢ï¼Œ`label_loss_items` æ–¹æ³•ç”¨äºè¿”å›å¸¦æ ‡ç­¾çš„è®­ç»ƒæŸå¤±å­—å…¸ï¼Œä¾¿äºåç»­åˆ†æã€‚`progress_string` æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„ epochã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚

æ­¤å¤–ï¼Œç¨‹åºè¿˜æä¾›äº†ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡çš„åŠŸèƒ½ã€‚`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ï¼Œè€Œ `plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ™ç”¨äºç»˜åˆ¶è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŒ‡æ ‡å’Œæ ‡ç­¾ï¼Œå¸®åŠ©ç”¨æˆ·ç›´è§‚åœ°äº†è§£æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº† YOLO æ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæ¶µç›–äº†æ•°æ®å¤„ç†ã€æ¨¡å‹è®¾ç½®ã€è®­ç»ƒè¿‡ç¨‹ç›‘æ§å’Œç»“æœå¯è§†åŒ–ç­‰å¤šä¸ªæ–¹é¢ï¼Œä¸ºç›®æ ‡æ£€æµ‹ä»»åŠ¡æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„è®­ç»ƒæ¡†æ¶ã€‚

#### 11.5 code\ultralytics\models\utils\ops.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç®€åŒ–å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼Œä¸»è¦ä¿ç•™äº† `HungarianMatcher` ç±»åŠå…¶æ ¸å¿ƒæ–¹æ³• `forward`ï¼Œå¹¶æ·»åŠ äº†è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import torch
import torch.nn as nn
import torch.nn.functional as F
from scipy.optimize import linear_sum_assignment
from ultralytics.utils.metrics import bbox_iou

class HungarianMatcher(nn.Module):
    """
    å®ç°åŒˆç‰™åˆ©åŒ¹é…å™¨çš„æ¨¡å—ï¼Œç”¨äºåœ¨ç«¯åˆ°ç«¯çš„æ–¹å¼ä¸­è§£å†³åˆ†é…é—®é¢˜ã€‚
    åŒˆç‰™åˆ©åŒ¹é…å™¨é€šè¿‡è€ƒè™‘åˆ†ç±»åˆ†æ•°ã€è¾¹ç•Œæ¡†åæ ‡å’Œå¯é€‰çš„æ©ç é¢„æµ‹æ¥æ‰§è¡Œæœ€ä½³åˆ†é…ã€‚
    """

    def __init__(self, cost_gain=None, use_fl=True, with_mask=False, num_sample_points=12544, alpha=0.25, gamma=2.0):
        """åˆå§‹åŒ–åŒˆç‰™åˆ©åŒ¹é…å™¨ï¼Œè®¾ç½®æˆæœ¬ç³»æ•°ã€ç„¦ç‚¹æŸå¤±ã€æ©ç é¢„æµ‹ã€æ ·æœ¬ç‚¹åŠ alpha å’Œ gamma å› å­ã€‚"""
        super().__init__()
        if cost_gain is None:
            cost_gain = {"class": 1, "bbox": 5, "giou": 2, "mask": 1, "dice": 1}
        self.cost_gain = cost_gain  # æˆæœ¬ç³»æ•°
        self.use_fl = use_fl  # æ˜¯å¦ä½¿ç”¨ç„¦ç‚¹æŸå¤±
        self.with_mask = with_mask  # æ˜¯å¦è¿›è¡Œæ©ç é¢„æµ‹
        self.num_sample_points = num_sample_points  # æ©ç æˆæœ¬è®¡ç®—ä¸­ä½¿ç”¨çš„æ ·æœ¬ç‚¹æ•°é‡
        self.alpha = alpha  # ç„¦ç‚¹æŸå¤±ä¸­çš„ alpha å› å­
        self.gamma = gamma  # ç„¦ç‚¹æŸå¤±ä¸­çš„ gamma å› å­

    def forward(self, pred_bboxes, pred_scores, gt_bboxes, gt_cls, gt_groups, masks=None, gt_mask=None):
        """
        å‰å‘ä¼ æ’­å‡½æ•°ï¼Œè®¡ç®—é¢„æµ‹ä¸çœŸå®å€¼ä¹‹é—´çš„æˆæœ¬ï¼Œå¹¶æ‰¾åˆ°æœ€ä½³åŒ¹é…ã€‚
        
        å‚æ•°:
            pred_bboxes (Tensor): é¢„æµ‹çš„è¾¹ç•Œæ¡†ï¼Œå½¢çŠ¶ä¸º [batch_size, num_queries, 4]ã€‚
            pred_scores (Tensor): é¢„æµ‹çš„åˆ†æ•°ï¼Œå½¢çŠ¶ä¸º [batch_size, num_queries, num_classes]ã€‚
            gt_cls (torch.Tensor): çœŸå®ç±»åˆ«ï¼Œå½¢çŠ¶ä¸º [num_gts, ]ã€‚
            gt_bboxes (torch.Tensor): çœŸå®è¾¹ç•Œæ¡†ï¼Œå½¢çŠ¶ä¸º [num_gts, 4]ã€‚
            gt_groups (List[int]): æ¯å¼ å›¾åƒçš„çœŸå®æ¡†æ•°é‡åˆ—è¡¨ã€‚
            masks (Tensor, optional): é¢„æµ‹çš„æ©ç ï¼Œå½¢çŠ¶ä¸º [batch_size, num_queries, height, width]ã€‚
            gt_mask (List[Tensor], optional): çœŸå®æ©ç åˆ—è¡¨ï¼Œå½¢çŠ¶ä¸º [num_masks, Height, Width]ã€‚

        è¿”å›:
            List[Tuple[Tensor, Tensor]]: æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå…ƒç»„ (index_i, index_j)ï¼Œ
            index_i æ˜¯é€‰æ‹©çš„é¢„æµ‹ç´¢å¼•ï¼Œindex_j æ˜¯å¯¹åº”çš„çœŸå®ç›®æ ‡ç´¢å¼•ã€‚
        """
        bs, nq, nc = pred_scores.shape  # è·å–æ‰¹æ¬¡å¤§å°ã€æŸ¥è¯¢æ•°é‡å’Œç±»åˆ«æ•°é‡

        # å¦‚æœæ²¡æœ‰çœŸå®æ¡†ï¼Œè¿”å›ç©ºçš„ç´¢å¼•
        if sum(gt_groups) == 0:
            return [(torch.tensor([], dtype=torch.long), torch.tensor([], dtype=torch.long)) for _ in range(bs)]

        # å°†é¢„æµ‹åˆ†æ•°å’Œè¾¹ç•Œæ¡†å±•å¹³ä»¥è®¡ç®—æˆæœ¬çŸ©é˜µ
        pred_scores = pred_scores.detach().view(-1, nc)
        pred_scores = F.sigmoid(pred_scores) if self.use_fl else F.softmax(pred_scores, dim=-1)
        pred_bboxes = pred_bboxes.detach().view(-1, 4)

        # è®¡ç®—åˆ†ç±»æˆæœ¬
        pred_scores = pred_scores[:, gt_cls]  # é€‰æ‹©ä¸çœŸå®ç±»åˆ«å¯¹åº”çš„é¢„æµ‹åˆ†æ•°
        if self.use_fl:
            # è®¡ç®—ç„¦ç‚¹æŸå¤±
            neg_cost_class = (1 - self.alpha) * (pred_scores**self.gamma) * (-(1 - pred_scores + 1e-8).log())
            pos_cost_class = self.alpha * ((1 - pred_scores) ** self.gamma) * (-(pred_scores + 1e-8).log())
            cost_class = pos_cost_class - neg_cost_class
        else:
            cost_class = -pred_scores  # ç›´æ¥ä½¿ç”¨è´Ÿåˆ†æ•°ä½œä¸ºæˆæœ¬

        # è®¡ç®—è¾¹ç•Œæ¡†ä¹‹é—´çš„ L1 æˆæœ¬
        cost_bbox = (pred_bboxes.unsqueeze(1) - gt_bboxes.unsqueeze(0)).abs().sum(-1)

        # è®¡ç®—è¾¹ç•Œæ¡†ä¹‹é—´çš„ GIoU æˆæœ¬
        cost_giou = 1.0 - bbox_iou(pred_bboxes.unsqueeze(1), gt_bboxes.unsqueeze(0), xywh=True, GIoU=True).squeeze(-1)

        # ç»„åˆæœ€ç»ˆæˆæœ¬çŸ©é˜µ
        C = (
            self.cost_gain["class"] * cost_class
            + self.cost_gain["bbox"] * cost_bbox
            + self.cost_gain["giou"] * cost_giou
        )

        # å¤„ç†æ— æ•ˆå€¼ï¼ˆNaN å’Œæ— ç©·å¤§ï¼‰
        C[C.isnan() | C.isinf()] = 0.0

        C = C.view(bs, nq, -1).cpu()  # é‡æ–°è°ƒæ•´æˆæœ¬çŸ©é˜µå½¢çŠ¶
        indices = [linear_sum_assignment(c[i]) for i, c in enumerate(C.split(gt_groups, -1))]  # ä½¿ç”¨åŒˆç‰™åˆ©ç®—æ³•è®¡ç®—åŒ¹é…
        gt_groups = torch.as_tensor([0, *gt_groups[:-1]]).cumsum_(0)  # è®¡ç®—çœŸå®æ¡†çš„ç´¢å¼•
        return [
            (torch.tensor(i, dtype=torch.long), torch.tensor(j, dtype=torch.long) + gt_groups[k])
            for k, (i, j) in enumerate(indices)
        ]
```

### ä»£ç è¯´æ˜
1. **HungarianMatcher ç±»**ï¼šå®ç°äº†åŒˆç‰™åˆ©ç®—æ³•ç”¨äºç›®æ ‡æ£€æµ‹ä¸­çš„åŒ¹é…é—®é¢˜ï¼Œèƒ½å¤Ÿè®¡ç®—é¢„æµ‹æ¡†ä¸çœŸå®æ¡†ä¹‹é—´çš„æœ€ä½³åŒ¹é…ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šè®¾ç½®æˆæœ¬ç³»æ•°ã€æ˜¯å¦ä½¿ç”¨ç„¦ç‚¹æŸå¤±ã€æ˜¯å¦è¿›è¡Œæ©ç é¢„æµ‹ç­‰å‚æ•°ã€‚
3. **forward æ–¹æ³•**ï¼šæ ¸å¿ƒè®¡ç®—æ–¹æ³•ï¼Œæ¥å—é¢„æµ‹æ¡†ã€é¢„æµ‹åˆ†æ•°ã€çœŸå®æ¡†ç­‰è¾“å…¥ï¼Œè®¡ç®—åˆ†ç±»æˆæœ¬ã€è¾¹ç•Œæ¡†æˆæœ¬å’Œ GIoU æˆæœ¬ï¼Œå¹¶è¿”å›æœ€ä½³åŒ¹é…çš„ç´¢å¼•ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º `HungarianMatcher` çš„ç±»ï¼Œä¸»è¦ç”¨äºè§£å†³ç›®æ ‡æ£€æµ‹ä¸­çš„åˆ†é…é—®é¢˜ã€‚è¯¥ç±»é€šè¿‡å®ç°åŒˆç‰™åˆ©ç®—æ³•æ¥ä¼˜åŒ–é¢„æµ‹è¾¹ç•Œæ¡†ä¸çœŸå®è¾¹ç•Œæ¡†ä¹‹é—´çš„åŒ¹é…ã€‚å®ƒçš„è®¾è®¡å…è®¸åœ¨ç«¯åˆ°ç«¯çš„è®­ç»ƒè¿‡ç¨‹ä¸­è¿›è¡Œå¾®åˆ†è®¡ç®—ï¼Œèƒ½å¤ŸåŒæ—¶è€ƒè™‘åˆ†ç±»åˆ†æ•°ã€è¾¹ç•Œæ¡†åæ ‡ä»¥åŠå¯é€‰çš„æ©ç é¢„æµ‹ã€‚

åœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­ï¼Œ`HungarianMatcher` æ¥å—å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬æˆæœ¬ç³»æ•°ã€æ˜¯å¦ä½¿ç”¨ç„¦ç‚¹æŸå¤±ã€æ˜¯å¦è¿›è¡Œæ©ç é¢„æµ‹ã€æ ·æœ¬ç‚¹æ•°é‡ä»¥åŠç„¦ç‚¹æŸå¤±çš„ä¸¤ä¸ªè¶…å‚æ•°ï¼ˆalpha å’Œ gammaï¼‰ã€‚å¦‚æœæ²¡æœ‰æä¾›æˆæœ¬ç³»æ•°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚

`forward` æ–¹æ³•æ˜¯è¯¥ç±»çš„æ ¸å¿ƒï¼Œè´Ÿè´£è®¡ç®—é¢„æµ‹è¾¹ç•Œæ¡†ä¸çœŸå®è¾¹ç•Œæ¡†ä¹‹é—´çš„åŒ¹é…ã€‚å®ƒé¦–å…ˆå¤„ç†è¾“å…¥çš„é¢„æµ‹è¾¹ç•Œæ¡†å’Œåˆ†æ•°ï¼Œå¹¶æ ¹æ®åˆ†ç±»æˆæœ¬ã€L1æˆæœ¬å’ŒGIoUæˆæœ¬è®¡ç®—æœ€ç»ˆçš„æˆæœ¬çŸ©é˜µã€‚åˆ†ç±»æˆæœ¬çš„è®¡ç®—å¯ä»¥é€‰æ‹©ä½¿ç”¨ç„¦ç‚¹æŸå¤±ï¼Œæ—¨åœ¨æé«˜æ¨¡å‹å¯¹éš¾ä»¥åˆ†ç±»æ ·æœ¬çš„å…³æ³¨ã€‚æ¥ç€ï¼Œä½¿ç”¨ `linear_sum_assignment` å‡½æ•°æ¥è§£å†³æˆæœ¬çŸ©é˜µä¸­çš„æœ€ä¼˜åŒ¹é…é—®é¢˜ï¼Œå¹¶è¿”å›æ¯ä¸ªæ‰¹æ¬¡ä¸­é€‰æ‹©çš„é¢„æµ‹å’ŒçœŸå®ç›®æ ‡çš„ç´¢å¼•ã€‚

æ­¤å¤–ï¼Œæ–‡ä»¶ä¸­è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸º `get_cdn_group` çš„å‡½æ•°ï¼Œç”¨äºåˆ›å»ºå¯¹æ¯”å»å™ªè®­ç»ƒç»„ã€‚è¯¥å‡½æ•°ä»çœŸå®æ ‡ç­¾ä¸­ç”Ÿæˆæ­£è´Ÿæ ·æœ¬ï¼Œå¹¶å¯¹ç±»æ ‡ç­¾å’Œè¾¹ç•Œæ¡†åæ ‡æ–½åŠ å™ªå£°ã€‚å®ƒè¿”å›ä¿®æ”¹åçš„ç±»åµŒå…¥ã€è¾¹ç•Œæ¡†ã€æ³¨æ„åŠ›æ©ç å’Œå…ƒä¿¡æ¯ï¼Œä»¥ä¾¿åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦åŠŸèƒ½æ˜¯å®ç°ç›®æ ‡æ£€æµ‹ä¸­çš„åŒ¹é…ç®—æ³•å’Œç”Ÿæˆè®­ç»ƒæ•°æ®ï¼Œæ”¯æŒæ¨¡å‹åœ¨å¤„ç†å¤æ‚åœºæ™¯æ—¶çš„å­¦ä¹ å’Œä¼˜åŒ–ã€‚

#### 11.6 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\utils\callbacks\hub.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import json
from time import time
from ultralytics.hub.utils import HUB_WEB_ROOT, PREFIX, events
from ultralytics.utils import LOGGER, SETTINGS

def on_fit_epoch_end(trainer):
    """åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶ä¸Šä¼ è®­ç»ƒè¿›åº¦æŒ‡æ ‡ã€‚"""
    session = getattr(trainer, 'hub_session', None)  # è·å–è®­ç»ƒå™¨çš„ä¼šè¯å¯¹è±¡
    if session:
        # åœ¨éªŒè¯ç»“æŸåä¸Šä¼ æŒ‡æ ‡
        all_plots = {**trainer.label_loss_items(trainer.tloss, prefix='train'), **trainer.metrics}  # æ”¶é›†è®­ç»ƒæŸå¤±å’ŒæŒ‡æ ‡
        if trainer.epoch == 0:
            from ultralytics.utils.torch_utils import model_info_for_loggers
            all_plots = {**all_plots, **model_info_for_loggers(trainer)}  # åœ¨ç¬¬ä¸€ä¸ªå‘¨æœŸæ—¶æ·»åŠ æ¨¡å‹ä¿¡æ¯
        session.metrics_queue[trainer.epoch] = json.dumps(all_plots)  # å°†æŒ‡æ ‡ä»¥JSONæ ¼å¼å­˜å…¥é˜Ÿåˆ—
        if time() - session.timers['metrics'] > session.rate_limits['metrics']:  # æ£€æŸ¥æ˜¯å¦è¶…è¿‡ä¸Šä¼ é™åˆ¶
            session.upload_metrics()  # ä¸Šä¼ æŒ‡æ ‡
            session.timers['metrics'] = time()  # é‡ç½®è®¡æ—¶å™¨
            session.metrics_queue = {}  # é‡ç½®é˜Ÿåˆ—

def on_model_save(trainer):
    """åœ¨ä¿å­˜æ¨¡å‹æ—¶ä¸Šä¼ æ£€æŸ¥ç‚¹ï¼Œå¸¦æœ‰é€Ÿç‡é™åˆ¶ã€‚"""
    session = getattr(trainer, 'hub_session', None)  # è·å–è®­ç»ƒå™¨çš„ä¼šè¯å¯¹è±¡
    if session:
        is_best = trainer.best_fitness == trainer.fitness  # åˆ¤æ–­å½“å‰æ¨¡å‹æ˜¯å¦æ˜¯æœ€ä½³æ¨¡å‹
        if time() - session.timers['ckpt'] > session.rate_limits['ckpt']:  # æ£€æŸ¥æ˜¯å¦è¶…è¿‡ä¸Šä¼ é™åˆ¶
            LOGGER.info(f'{PREFIX}Uploading checkpoint {HUB_WEB_ROOT}/models/{session.model_id}')  # è®°å½•ä¸Šä¼ ä¿¡æ¯
            session.upload_model(trainer.epoch, trainer.last, is_best)  # ä¸Šä¼ æ¨¡å‹
            session.timers['ckpt'] = time()  # é‡ç½®è®¡æ—¶å™¨

def on_train_end(trainer):
    """åœ¨è®­ç»ƒç»“æŸæ—¶ä¸Šä¼ æœ€ç»ˆæ¨¡å‹å’ŒæŒ‡æ ‡åˆ°Ultralytics HUBã€‚"""
    session = getattr(trainer, 'hub_session', None)  # è·å–è®­ç»ƒå™¨çš„ä¼šè¯å¯¹è±¡
    if session:
        LOGGER.info(f'{PREFIX}Syncing final model...')  # è®°å½•åŒæ­¥ä¿¡æ¯
        session.upload_model(trainer.epoch, trainer.best, map=trainer.metrics.get('metrics/mAP50-95(B)', 0), final=True)  # ä¸Šä¼ æœ€ç»ˆæ¨¡å‹
        session.alive = False  # åœæ­¢å¿ƒè·³
        LOGGER.info(f'{PREFIX}Done âœ…\n'
                    f'{PREFIX}View model at {HUB_WEB_ROOT}/models/{session.model_id} ğŸš€')  # è®°å½•å®Œæˆä¿¡æ¯

# å›è°ƒå‡½æ•°å­—å…¸ï¼Œæ ¹æ®è®¾ç½®å†³å®šæ˜¯å¦å¯ç”¨
callbacks = {
    'on_fit_epoch_end': on_fit_epoch_end,
    'on_model_save': on_model_save,
    'on_train_end': on_train_end,
} if SETTINGS['hub'] is True else {}  # éªŒè¯æ˜¯å¦å¯ç”¨
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **`on_fit_epoch_end`**ï¼šåœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶æ”¶é›†å¹¶ä¸Šä¼ è®­ç»ƒæŒ‡æ ‡ã€‚å®ƒä¼šæ£€æŸ¥æ˜¯å¦è¶…è¿‡äº†ä¸Šä¼ é€Ÿç‡é™åˆ¶ï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶æœºå°†æŒ‡æ ‡ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚
2. **`on_model_save`**ï¼šåœ¨ä¿å­˜æ¨¡å‹æ—¶ä¸Šä¼ æ£€æŸ¥ç‚¹ï¼Œå¹¶ç¡®ä¿éµå¾ªé€Ÿç‡é™åˆ¶ã€‚è¿™å¯ä»¥é¿å…è¿‡äºé¢‘ç¹çš„ä¸Šä¼ è¯·æ±‚ã€‚
3. **`on_train_end`**ï¼šåœ¨è®­ç»ƒç»“æŸæ—¶ä¸Šä¼ æœ€ç»ˆæ¨¡å‹å’Œç›¸å…³æŒ‡æ ‡ï¼Œç¡®ä¿è®­ç»ƒçš„ç»“æœèƒ½å¤Ÿè¢«æŒä¹…åŒ–åˆ°Ultralytics HUBã€‚

è¿™äº›å‡½æ•°é€šè¿‡å›è°ƒæœºåˆ¶åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è¢«è°ƒç”¨ï¼Œç¡®ä¿è®­ç»ƒè¿›åº¦å’Œæ¨¡å‹çŠ¶æ€èƒ½å¤ŸåŠæ—¶ä¸Šä¼ å’Œè®°å½•ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯Ultralytics YOLOï¼ˆYou Only Look Onceï¼‰ç®—æ³•çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºå¤„ç†ä¸æ¨¡å‹è®­ç»ƒç›¸å…³çš„å›è°ƒå‡½æ•°ã€‚å®ƒåŒ…å«äº†ä¸€ç³»åˆ—çš„å›è°ƒå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è®­ç»ƒã€éªŒè¯å’Œå¯¼å‡ºæ¨¡å‹çš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ï¼Œä»¥ä¾¿è®°å½•å’Œä¸Šä¼ è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§ä¿¡æ¯ã€‚

æ–‡ä»¶å¼€å§‹éƒ¨åˆ†å¯¼å…¥äº†ä¸€äº›å¿…è¦çš„åº“å’Œæ¨¡å—ï¼ŒåŒ…æ‹¬JSONå¤„ç†ã€æ—¶é—´ç®¡ç†ä»¥åŠUltralyticsçš„ç›¸å…³å·¥å…·å’Œæ—¥å¿—è®°å½•åŠŸèƒ½ã€‚æ¥ä¸‹æ¥å®šä¹‰äº†ä¸€äº›å›è°ƒå‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ç‰¹å®šçš„åŠŸèƒ½ã€‚

`on_pretrain_routine_end`å‡½æ•°åœ¨é¢„è®­ç»ƒä¾‹ç¨‹ç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œä¸»è¦ç”¨äºè®°å½•ä¿¡æ¯å¹¶å¯åŠ¨ä¸Šä¼ é€Ÿç‡é™åˆ¶çš„è®¡æ—¶å™¨ã€‚å®ƒä¼šæ£€æŸ¥è®­ç»ƒå™¨æ˜¯å¦æœ‰hubä¼šè¯ï¼Œå¦‚æœæœ‰ï¼Œå°±è®°å½•æ¨¡å‹çš„é“¾æ¥ï¼Œå¹¶åˆå§‹åŒ–ä¸€äº›è®¡æ—¶å™¨ã€‚

`on_fit_epoch_end`å‡½æ•°åœ¨æ¯ä¸ªè®­ç»ƒå‘¨æœŸç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè´Ÿè´£ä¸Šä¼ è®­ç»ƒè¿›åº¦çš„æŒ‡æ ‡ã€‚å®ƒä¼šæ”¶é›†è®­ç»ƒæŸå¤±å’Œå…¶ä»–æŒ‡æ ‡ï¼Œå¹¶åœ¨é€‚å½“çš„æ—¶é—´ä¸Šä¼ è¿™äº›æ•°æ®ï¼Œä»¥ç¡®ä¿ä¸è¶…è¿‡é€Ÿç‡é™åˆ¶ã€‚

`on_model_save`å‡½æ•°åœ¨æ¨¡å‹ä¿å­˜æ—¶è¢«è°ƒç”¨ï¼Œè´Ÿè´£å°†æ£€æŸ¥ç‚¹ä¸Šä¼ åˆ°Ultralytics HUBã€‚å®ƒä¼šæ£€æŸ¥å½“å‰æ¨¡å‹æ˜¯å¦æ˜¯æœ€ä½³æ¨¡å‹ï¼Œå¹¶åœ¨æ»¡è¶³é€Ÿç‡é™åˆ¶çš„æƒ…å†µä¸‹ä¸Šä¼ æ¨¡å‹ã€‚

`on_train_end`å‡½æ•°åœ¨è®­ç»ƒç»“æŸæ—¶è¢«è°ƒç”¨ï¼Œè´Ÿè´£ä¸Šä¼ æœ€ç»ˆæ¨¡å‹å’Œç›¸å…³æŒ‡æ ‡ã€‚å®ƒä¼šè®°å½•ä¸Šä¼ è¿‡ç¨‹ï¼Œå¹¶åœ¨å®Œæˆååœæ­¢å¿ƒè·³ä¿¡å·ã€‚

`on_train_start`ã€`on_val_start`ã€`on_predict_start`å’Œ`on_export_start`å‡½æ•°åˆ†åˆ«åœ¨è®­ç»ƒã€éªŒè¯ã€é¢„æµ‹å’Œå¯¼å‡ºå¼€å§‹æ—¶è¢«è°ƒç”¨ï¼Œä¸»è¦ç”¨äºè¿è¡Œä¸è¿™äº›äº‹ä»¶ç›¸å…³çš„æ“ä½œã€‚

æœ€åï¼Œæ‰€æœ‰çš„å›è°ƒå‡½æ•°è¢«ç»„ç»‡æˆä¸€ä¸ªå­—å…¸ï¼Œæ–¹ä¾¿åœ¨éœ€è¦æ—¶è°ƒç”¨ã€‚å¦‚æœè®¾ç½®ä¸­å¯ç”¨äº†hubåŠŸèƒ½ï¼Œåˆ™ä¼šå°†è¿™äº›å›è°ƒå‡½æ•°æ³¨å†Œåˆ°å­—å…¸ä¸­ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶çš„ä¸»è¦ç›®çš„æ˜¯åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­è‡ªåŠ¨è®°å½•å’Œä¸Šä¼ æ¨¡å‹çš„çŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡ï¼Œä»¥ä¾¿äºåç»­çš„åˆ†æå’Œæ¨¡å‹ç®¡ç†ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºYOLOv8çš„ç›®æ ‡æ£€æµ‹æ¡†æ¶ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªå®Œæ•´çš„è®­ç»ƒã€éªŒè¯å’Œæ¨ç†æµç¨‹ã€‚å®ƒåŒ…å«å¤šä¸ªæ¨¡å—ï¼Œæ¶µç›–æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€ç»“æœå¯è§†åŒ–ã€å›è°ƒå‡½æ•°ã€æ¨¡å‹è¯„ä¼°ç­‰åŠŸèƒ½ã€‚é¡¹ç›®çš„æ¶æ„è®¾è®¡ä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿæ–¹ä¾¿åœ°åŠ è½½æ•°æ®é›†ã€é…ç½®æ¨¡å‹ã€è¿›è¡Œè®­ç»ƒå’Œè¯„ä¼°ï¼Œå¹¶é€šè¿‡å¯è§†åŒ–å·¥å…·åˆ†æç»“æœã€‚ä»¥ä¸‹æ˜¯å„ä¸ªæ–‡ä»¶çš„åŠŸèƒ½æ¦‚è¿°ï¼š

| æ–‡ä»¶è·¯å¾„                                                                 | åŠŸèƒ½æè¿°                                                                                   |
|--------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
| `ultralytics/models/sam/modules/decoders.py`                            | å®ç°æ©ç è§£ç å™¨ï¼Œä½¿ç”¨å˜æ¢å™¨æ¶æ„ç”Ÿæˆå›¾åƒæ©ç å’Œè´¨é‡è¯„åˆ†ã€‚                                      |
| `code/log.py`                                                           | å¤„ç†å›¾åƒæ•°æ®å’Œè®°å½•æ£€æµ‹ç»“æœï¼Œæä¾›ç»“æœè®°å½•å’Œå¯è§†åŒ–åŠŸèƒ½ã€‚                                      |
| `ui.py`                                                                 | å¯åŠ¨æŒ‡å®šçš„Pythonè„šæœ¬ï¼ˆå¦‚`web.py`ï¼‰ï¼Œç”¨äºè¿è¡Œæ•°æ®åº”ç”¨ã€‚                                     |
| `code/ultralytics/utils/plotting.py`                                   | æä¾›å›¾åƒå¯è§†åŒ–å’Œæ ‡æ³¨å·¥å…·ï¼Œæ”¯æŒç»˜åˆ¶è¾¹ç•Œæ¡†ã€å…³é”®ç‚¹ã€æ©è†œç­‰ï¼Œå¹¶ç”Ÿæˆè®­ç»ƒæ ·æœ¬å’ŒæŒ‡æ ‡å›¾ã€‚            |
| `train.py`                                                              | å®ç°YOLOæ¨¡å‹çš„è®­ç»ƒæµç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ¨¡å‹è®¾ç½®ã€æŸå¤±è®°å½•å’Œè®­ç»ƒè¿‡ç¨‹ç›‘æ§ã€‚                  |
| `code/ultralytics/models/utils/ops.py`                                  | å®ç°åŒˆç‰™åˆ©ç®—æ³•çš„åŒ¹é…å™¨ï¼Œç”¨äºä¼˜åŒ–é¢„æµ‹è¾¹ç•Œæ¡†ä¸çœŸå®è¾¹ç•Œæ¡†ä¹‹é—´çš„åŒ¹é…ã€‚                          |
| `code/ultralytics/utils/callbacks/hub.py`                              | å¤„ç†ä¸æ¨¡å‹è®­ç»ƒç›¸å…³çš„å›è°ƒå‡½æ•°ï¼Œè®°å½•å’Œä¸Šä¼ è®­ç»ƒè¿‡ç¨‹ä¸­çš„å„ç§ä¿¡æ¯ã€‚                             |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰/ultralytics/data/utils.py` | æä¾›æ•°æ®å¤„ç†å’Œå¢å¼ºçš„å·¥å…·å‡½æ•°ï¼Œæ”¯æŒæ•°æ®é›†çš„åŠ è½½å’Œé¢„å¤„ç†ã€‚                                   |
| `code/ultralytics/models/sam/modules/tiny_encoder.py`                  | å®ç°å°å‹ç¼–ç å™¨ï¼Œç”¨äºç‰¹å¾æå–å’Œæ•°æ®å‹ç¼©ï¼Œæ”¯æŒæ¨¡å‹çš„é«˜æ•ˆæ¨ç†ã€‚                                |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰/ultralytics/nn/extra_modules/kernel_warehouse.py` | æä¾›å†…æ ¸ä»“åº“åŠŸèƒ½ï¼Œæ”¯æŒæ¨¡å‹ä¸­ä½¿ç”¨çš„å„ç§å·ç§¯å’Œæ¿€æ´»å‡½æ•°çš„ç®¡ç†ã€‚                                |
| `70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰/ultralytics/models/yolo/detect/val.py` | å®ç°æ¨¡å‹éªŒè¯åŠŸèƒ½ï¼Œè¯„ä¼°æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„æ€§èƒ½ã€‚                                              |
| `code/ultralytics/hub/__init__.py`                                     | æä¾›ä¸Ultralytics HUBäº¤äº’çš„åŠŸèƒ½ï¼Œæ”¯æŒæ¨¡å‹çš„ä¸Šä¼ å’Œç®¡ç†ã€‚                                    |
| `code/ultralytics/data/split_dota.py`                                   | å®ç°DOTAæ•°æ®é›†çš„åˆ’åˆ†åŠŸèƒ½ï¼Œæ”¯æŒè®­ç»ƒã€éªŒè¯å’Œæµ‹è¯•é›†çš„ç”Ÿæˆã€‚                                   |

### æ€»ç»“

è¯¥é¡¹ç›®é€šè¿‡æ¨¡å—åŒ–è®¾è®¡ï¼Œä½¿å¾—ç›®æ ‡æ£€æµ‹çš„è®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹æ›´åŠ é«˜æ•ˆå’Œçµæ´»ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰æ•°æ®é›†ã€æ¨¡å‹å‚æ•°å’Œè®­ç»ƒç­–ç•¥ï¼ŒåŒæ—¶åˆ©ç”¨å¯è§†åŒ–å·¥å…·å’Œå›è°ƒå‡½æ•°æ¥ç›‘æ§å’Œä¼˜åŒ–è®­ç»ƒè¿‡ç¨‹ã€‚æ•´ä½“æ¶æ„çš„è®¾è®¡ä½¿å¾—ä»£ç æ˜“äºæ‰©å±•å’Œç»´æŠ¤ï¼Œé€‚åˆäºç ”ç©¶å’Œå®é™…åº”ç”¨ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuUm5xr](https://mbd.pub/o/bread/ZpuUm5xr)